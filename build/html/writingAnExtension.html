<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Extension Authors &#8212; Runestone Interactive 1.0 documentation</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="_static/clickable.css?v=58C4E18A" />
    <link rel="stylesheet" type="text/css" href="_static/tabbedstuff.css?v=424F1CC9" />
    <link rel="stylesheet" type="text/css" href="_static/fitb.css?v=3BA0E63E" />
    <link rel="stylesheet" type="text/css" href="_static/video.css?v=E5385B3B" />
    <link rel="stylesheet" type="text/css" href="_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="_static/codemirror.css?v=1CE53237" />
    <link rel="stylesheet" type="text/css" href="_static/reveal.css?v=4A81D381" />
    <link rel="stylesheet" type="text/css" href="_static/parsons.css?v=B035A1D9" />
    <link rel="stylesheet" type="text/css" href="_static/js_lib/prettify.css?v=2A364B6B" />
    <link rel="stylesheet" type="text/css" href="_static/pytutor.css?v=239FC54E" />
    <link rel="stylesheet" type="text/css" href="_static/modal-basic.css?v=8A1A42E4" />
    <link rel="stylesheet" type="text/css" href="_static/activecode.css?v=D0B347A5" />
    <link rel="stylesheet" type="text/css" href="_static/datafile.css?v=C184EB8A" />
    <link rel="stylesheet" type="text/css" href="_static/showEval.css?v=C6382F3" />
    <link rel="stylesheet" type="text/css" href="_static/accessibility.css?v=808B982A" />
    <link rel="stylesheet" type="text/css" href="_static/dragndrop.css?v=B9BAA0D1" />
    <link rel="stylesheet" type="text/css" href="_static/poll.css?v=E220AC33" />
    <link rel="stylesheet" href="_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/runestonebase.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/matrixeq.js?v=D64CFA5A"></script>
    <script type="text/javascript" src="_static/clickable.js?v=9560E65E"></script>
    <script type="text/javascript" src="_static/timedclickable.js?v=93989C23"></script>
    <script type="text/javascript" src="_static/tabbedstuff.js?v=5BE6106"></script>
    <script type="text/javascript" src="_static/fitb.js?v=8E40E713"></script>
    <script type="text/javascript" src="_static/timedfitb.js?v=2AA17071"></script>
    <script type="text/javascript" src="_static/runestonevideo.js?v=53E888DE"></script>
    <script type="text/javascript" src="_static/codemirror.js?v=94F552C9"></script>
    <script type="text/javascript" src="_static/xml.js?v=236EDFF7"></script>
    <script type="text/javascript" src="_static/css.js?v=623153CE"></script>
    <script type="text/javascript" src="_static/htmlmixed.js?v=33B91944"></script>
    <script type="text/javascript" src="_static/javascript.js?v=6F38CA04"></script>
    <script type="text/javascript" src="_static/webglinteractive.js?v=2B768384"></script>
    <script type="text/javascript" src="_static/FileSaver.min.js?v=8408C997"></script>
    <script type="text/javascript" src="_static/Blob.js?v=AEC2447"></script>
    <script type="text/javascript" src="_static/reveal.js?v=7C095993"></script>
    <script type="text/javascript" src="_static/js_lib/prettify.js?v=CA7E8928"></script>
    <script type="text/javascript" src="_static/js_lib/hammer.min.js?v=73056367"></script>
    <script type="text/javascript" src="_static/parsons.js?v=8D873C0A"></script>
    <script type="text/javascript" src="_static/timedparsons.js?v=2EEA9E5A"></script>
    <script type="text/javascript" src="_static/animationbase.js?v=A043C3A7"></script>
    <script type="text/javascript" src="_static/mchoice.js?v=8329CA55"></script>
    <script type="text/javascript" src="_static/timedmc.js?v=B010A457"></script>
    <script type="text/javascript" src="_static/timed.js?v=6789FE30"></script>
    <script type="text/javascript" src="_static/shortanswer.js?v=5EB6170D"></script>
    <script type="text/javascript" src="_static/timed_shortanswer.js?v=B3A117D7"></script>
    <script type="text/javascript" src="_static/d3.v2.min.js?v=836E01C"></script>
    <script type="text/javascript" src="_static/jquery.ba-bbq.min.js?v=B64CF0A8"></script>
    <script type="text/javascript" src="_static/jquery.jsPlumb-1.3.10-all-min.js?v=42F9EBEA"></script>
    <script type="text/javascript" src="_static/pytutor.js?v=82B022B9"></script>
    <script type="text/javascript" src="_static/codelens.js?v=CABECD49"></script>
    <script type="text/javascript" src="_static/jquery.highlight.js?v=F1C496C8"></script>
    <script type="text/javascript" src="_static/bookfuncs.js?v=ED84393D"></script>
    <script type="text/javascript" src="_static/python.js?v=14A28F1F"></script>
    <script type="text/javascript" src="_static/jquery_i18n/CLDRPluralRuleParser.js?v=599B42B0"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.js?v=88A1430F"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.messagestore.js?v=AE15A4A1"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.fallbacks.js?v=8ABDFE7F"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.language.js?v=747279FF"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.parser.js?v=7B020E13"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.emitter.js?v=660E85C3"></script>
    <script type="text/javascript" src="_static/jquery_i18n/jquery.i18n.emitter.bidi.js?v=54B21948"></script>
    <script type="text/javascript" src="_static/activecode-i18n.en.js?v=3FBAE230"></script>
    <script type="text/javascript" src="_static/skulpt.min.js?v=CB855D57"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js?v=3C6652E0"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script type="text/javascript" src="_static/activecode.js?v=A048601A"></script>
    <script type="text/javascript" src="_static/clike.js?v=2DCE0756"></script>
    <script type="text/javascript" src="_static/timed_activecode.js?v=5150FA78"></script>
    <script type="text/javascript" src="_static/datafile.js?v=3ED1A80C"></script>
    <script type="text/javascript" src="_static/showEval.js?v=C5CE0C81"></script>
    <script type="text/javascript" src="_static/dragndrop.js?v=2B6403E8"></script>
    <script type="text/javascript" src="_static/timeddnd.js?v=378F237E"></script>
    <script type="text/javascript" src="_static/poll.js?v=6C59AE9F"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="_static/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/waypoints.min.js"></script>
    <script type="text/javascript" src="_static/rangy-core.js"></script>
    <script type="text/javascript" src="_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="_static/user-highlights.js"></script>
    <script type="text/javascript" src="_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Server Hackers" href="server_hackers.html" />
    <link rel="prev" title="Controlling Question Numbering" href="directives/qnum.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'https://runestone.academy' ? 'https://runestone.academy' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'html';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.jobehost = 'https://cryptic-headland-94862.herokuapp.com/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.runestone_version = '3.3.2';

</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="index.html">Runestone Interactive</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div class="gittip">
                  <iframe style="border:0;"
                    src="https://www.gittip.com/bnmnetp/widget.html"
                    width="48pt" height="22pt" class="gittip-button">
                  </iframe>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/html/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/html/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='https://github.com/bnmnetp/runestone/issues/new'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Extension Authors</a><ul>
<li><a class="reference internal" href="#components-of-a-directive">Components of a directive</a></li>
<li><a class="reference internal" href="#initialization">Initialization</a></li>
<li><a class="reference internal" href="#parsing">Parsing</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - Controlling Question Numbering" data-toggle="tooltip">
    <a href="directives/qnum.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - Server Hackers' data-toggle="tooltip" >
    <a href="server_hackers.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li>
  <a href="_sources/writingAnExtension.rst.txt"
     rel="nofollow">Source</a></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="extension-authors">
<h1>Extension Authors<a class="headerlink" href="#extension-authors" title="Permalink to this headline">¶</a></h1>
<p>In this section I will take you through an example of writing a new directive for the runestone interactive system.  In this case we will look at adding a <code class="docutils literal notranslate"><span class="pre">datafile</span></code> directive.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">datafile</span></code> directive is going to be used in conjunction with the skulpt file operations.  For skulpt to read a file we must provide some data that data can either be data that is part of a <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> element or if we want the data to be editable we can embed the data in a <code class="docutils literal notranslate"><span class="pre">&lt;textarea&gt;</span></code> element.   In the case of the <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> element the data might be visible or it might be hidden.  Our directive will look something like this:</p>
<p>Indentation is important.  Following the directive line, you can have as many optional parameters as you want.  Followed by a blank line, followed by the main body of your directive.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">datafile</span><span class="p">::</span>  <span class="n">myid</span>
   <span class="p">:</span><span class="n">edit</span><span class="p">:</span>
   <span class="p">:</span><span class="n">rows</span><span class="p">:</span> <span class="mi">20</span>
   <span class="p">:</span><span class="n">cols</span><span class="p">:</span> <span class="mi">65</span>

   <span class="n">line</span> <span class="mi">1</span>  <span class="n">some</span> <span class="n">data</span>
   <span class="n">line</span> <span class="mi">2</span>  <span class="n">some</span> <span class="n">more</span> <span class="n">data</span>
   <span class="n">line</span> <span class="mi">3</span>  <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">end</span>
</pre></div>
</div>
<p>So the datafile takes one required parameter, a unique id that is used by the Skulpt <code class="docutils literal notranslate"><span class="pre">open</span></code> function as the file name.  The <code class="docutils literal notranslate"><span class="pre">:edit:</span></code> parameter tells us to make a textarea rather than a pre.  The <code class="docutils literal notranslate"><span class="pre">:rows:</span></code> and <code class="docutils literal notranslate"><span class="pre">:cols:</span></code> tell us how many rows and columns to add to the textarea.  If these are not present, then our directive should do its best to figure out a reasonable number of rows and columns.</p>
<p>The html output of the directive above should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">textarea</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;myid&quot;</span> <span class="n">cols</span><span class="o">=</span><span class="s2">&quot;65&quot;</span> <span class="n">rows</span><span class="o">=</span><span class="s2">&quot;20&quot;</span><span class="o">&gt;</span>
<span class="n">line</span> <span class="mi">1</span>  <span class="n">some</span> <span class="n">data</span>
<span class="n">line</span> <span class="mi">2</span>  <span class="n">some</span> <span class="n">more</span> <span class="n">data</span>
<span class="n">line</span> <span class="mi">3</span>  <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">end</span>
<span class="o">&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>We will also make this extension work if the user wants to generate a non-interactive paper or pdf version of some text using LaTeX.  In this case the output of our directive should simply be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
<span class="n">line</span> <span class="mi">1</span>  <span class="n">some</span> <span class="n">data</span>
<span class="n">line</span> <span class="mi">2</span>  <span class="n">some</span> <span class="n">more</span> <span class="n">data</span>
<span class="n">line</span> <span class="mi">3</span>  <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">end</span>
\<span class="n">end</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
</pre></div>
</div>
<p>Unless the <code class="docutils literal notranslate"><span class="pre">:hide:</span></code> flag is present in which case we won’t generate anything.</p>
<div class="section" id="components-of-a-directive">
<h2>Components of a directive<a class="headerlink" href="#components-of-a-directive" title="Permalink to this headline">¶</a></h2>
<p>There are several parts to writing an extension.</p>
<ol class="arabic simple">
<li>Initialization:  In this part you need to let sphinx know that there there is a new directive.  The name of the directive is associated with a Python class that derives from the restructuredText <code class="docutils literal notranslate"><span class="pre">Directive</span></code> class.</li>
<li>Parse Time:  In this stage of processing sphinx is building the document object model.  A tree of nodes.  At this stage we process all of the arguments and gather the main content into a structure that can be used later when rendering a document in whatever format:  html, latex, epub, etc.</li>
<li>Output:  At this stage we take the data that we have and format it for output by whatever <em>writer</em> is being used, again html, latex, etc.</li>
</ol>
<p>All of the components of a directive can go in a single Python file.  Sphinx sees these extensions as simple python packages, so you can create a folder with an <code class="docutils literal notranslate"><span class="pre">__init.py</span></code> file or you can create an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file that imports one or more of your own files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file should go in the modules folder following the folder heirarchy that is in place.  For example  <code class="docutils literal notranslate"><span class="pre">luther/sphinx/datafile/</span></code>.</p>
</div>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>For the initialization phase we need to provide a setup function.  The setup function connects the directive name with a class, and tells skulpt about any css or javscript files that will be needed to support any html output.</p>
<p>The initialization code for the datafile directive looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">docutils</span> <span class="k">import</span> <span class="n">nodes</span>
<span class="kn">from</span> <span class="nn">docutils.parsers.rst</span> <span class="k">import</span> <span class="n">directives</span>
<span class="kn">from</span> <span class="nn">docutils.parsers.rst</span> <span class="k">import</span> <span class="n">Directive</span>


<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;datafile&#39;</span><span class="p">,</span><span class="n">DataFile</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_javascript</span><span class="p">(</span><span class="s1">&#39;bookfuncs.js&#39;</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_javascript</span><span class="p">(</span><span class="s1">&#39;skulpt/dist/skulpt.js&#39;</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_javascript</span><span class="p">(</span><span class="s1">&#39;skulpt/dist/builtin.js&#39;</span><span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">DataFileNode</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="p">(</span><span class="n">visit_df_node</span><span class="p">,</span> <span class="n">depart_df_node</span><span class="p">))</span>

    <span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;doctree-resolved&#39;</span><span class="p">,</span><span class="n">process_datafile_nodes</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;env-purge-doc&#39;</span><span class="p">,</span> <span class="n">purge_datafiles</span><span class="p">)</span>
</pre></div>
</div>
<p>The key function here is the setup function.   The <code class="docutils literal notranslate"><span class="pre">add_directive</span></code> method maps the <code class="docutils literal notranslate"><span class="pre">datafile</span></code> directive to the <code class="docutils literal notranslate"><span class="pre">DataFile</span></code> class.  Then we add three javascript files we want to include along with a new node type called <code class="docutils literal notranslate"><span class="pre">DataFileNode</span></code>  This is the node that will get added to the document object model.</p>
<p>The next line connects the <code class="docutils literal notranslate"><span class="pre">'doctree-resolved'</span></code> event with a function called <code class="docutils literal notranslate"><span class="pre">process_datafile_nodes</span></code>.  This function could be used to create an index of our datafiles, or do nothing.  the <code class="docutils literal notranslate"><span class="pre">env-purge-doc</span></code> event is simliar but is called after all datafile nodes have been processed.</p>
</div>
<div class="section" id="parsing">
<h2>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h2>
<p>During the parse phase there is one class for every directive.  This class must supply a run method that returns a list of nodes.  If you know that your directive is only ever going to create output for a particular rendering, e.g. html you can finish your run method by returning a <code class="docutils literal notranslate"><span class="pre">raw</span></code> node that is simply a string.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">mystring</span> <span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>In this case mystring could be as long and complicated an html string as you might like to make.  A minimal hello world type example might be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>In other cases you will defer the rendering of the node until later, having built a structure that can support multiple output styles.  In our example you will see that we return:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">DataFileNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)]</span>
</pre></div>
</div>
<p>Where the DataFileNode just maintains a dictionary of data items we will use when we want to render any of the possible output formats.</p>
<p>If you return a <code class="docutils literal notranslate"><span class="pre">raw</span></code> node then you can ignore the <code class="docutils literal notranslate"><span class="pre">app.add_node(DataFileNode,</span> <span class="pre">html=(visit_df_node,</span> <span class="pre">depart_df_node))</span></code> line in the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method.</p>
<p>Here is the DataFile class along with its run method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DataFile</span><span class="p">(</span><span class="n">Directive</span><span class="p">):</span>
    <span class="n">required_arguments</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">optional_arguments</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">has_content</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">option_spec</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;hide&#39;</span><span class="p">:</span><span class="n">directives</span><span class="o">.</span><span class="n">flag</span><span class="p">,</span>
        <span class="s1">&#39;edit&#39;</span><span class="p">:</span><span class="n">directives</span><span class="o">.</span><span class="n">flag</span><span class="p">,</span>
        <span class="s1">&#39;rows&#39;</span><span class="p">:</span><span class="n">directives</span><span class="o">.</span><span class="n">positive_int</span><span class="p">,</span>
        <span class="s1">&#39;cols&#39;</span><span class="p">:</span><span class="n">directives</span><span class="o">.</span><span class="n">positive_int</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">document</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">env</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="s1">&#39;datafilecounter&#39;</span><span class="p">):</span>
            <span class="n">env</span><span class="o">.</span><span class="n">datafilecounter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">env</span><span class="o">.</span><span class="n">datafilecounter</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="s1">&#39;cols&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;cols&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="nb">max</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">]))</span>
        <span class="k">if</span> <span class="s1">&#39;rows&#39;</span><span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;rows&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;divid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;filecontent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>

        <span class="k">if</span> <span class="s1">&#39;hide&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;hide&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;hide&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>

        <span class="k">if</span> <span class="s1">&#39;edit&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">DataFileNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)]</span>
</pre></div>
</div>
<p>As you can see our class has some shared/static/class level variables that specify whether the directive has content, how many arguments, and what the names and types of the arguments are.</p>
<p>Here are the possible types for the options:</p>
<ul class="simple">
<li>flag: For options with no option arguments. Checks for an argument (raises ValueError if found), returns None for valid flag options.</li>
<li>unchanged_required: Returns the text argument, unchanged. Raises ValueError if no argument is found.</li>
<li>unchanged: Returns the text argument, unchanged. Returns an empty string (“”) if no argument is found.</li>
<li>path: Returns the path argument unwrapped (with newlines removed). Raises ValueError if no argument is found.</li>
<li>uri: Returns the URI argument with whitespace removed. Raises ValueError if no argument is found.</li>
<li>nonnegative_int: Checks for a nonnegative integer argument, and raises ValueError if not.</li>
<li>class_option: Converts the argument into an ID-compatible string and returns it. Raises ValueError if no argument is found.</li>
<li>unicode_code: Convert a Unicode character code to a Unicode character.</li>
<li>single_char_or_unicode: A single character is returned as-is. Unicode characters codes are converted as in unicode_code.</li>
<li>single_char_or_whitespace_or_unicode: As with single_char_or_unicode, but “tab” and “space” are also supported.</li>
<li>positive_int: Converts the argument into an integer. Raises ValueError for negative, zero, or non-integer values.</li>
<li>positive_int_list: Converts a space- or comma-separated list of integers into a Python list of integers. Raises ValueError for non-positive-integer values.</li>
<li>encoding: Verfies the encoding argument by lookup. Raises ValueError for unknown encodings.</li>
</ul>
<p>There are two important instance variables to think about.</p>
<ul class="simple">
<li>self.content  Refers to the body content of the directive.  That is the indented text that comes after the options.  This can be anything, and you can make up your own conventions for how to interpret the body of a directive.</li>
<li>self.options  Is a dictionary that contins key value pairs for all of  the optional parameters.  Of course you are free to modify this dictionary as much as you wish.</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">self.options</span></code> instance variable is a dictionary that will be used later to fill in a template for our output.  So, most of the processing in the <code class="docutils literal notranslate"><span class="pre">run</span></code> method is checking to see if the author provided values for these options and providing some default values for them if they have not.</p>
<p>The last line of <code class="docutils literal notranslate"><span class="pre">run</span></code> creates an instance of our DataFileNode.  This object doesn’t do much other than act as a container to hold our data until it is time to render the output.  Nevertheless here is the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DataFileNode</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">General</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Element</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments:</span>
<span class="sd">        - `self`:</span>
<span class="sd">        - `content`:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DataFileNode</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df_content</span> <span class="o">=</span> <span class="n">content</span>
</pre></div>
</div>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>In the final stage of processing we render the document in whatever format the author is requesting.  In this stage we take the data stored away in our <code class="docutils literal notranslate"><span class="pre">DataFileNode</span></code> and turn it into html or latex or whatever.</p>
<p>Each output format is handled by their own function that is registered back in the setup phase.  recall that we used the following line to connect our html output with a couple of functions:  <code class="docutils literal notranslate"><span class="pre">app.add_node(DataFileNode,</span> <span class="pre">html=(visit_df_node,</span> <span class="pre">depart_df_node))</span></code>.</p>
<p>We will use Python triple quoted strings to create a couple of templates to fill in.  In the code below these templates are <code class="docutils literal notranslate"><span class="pre">PRE</span></code> and <code class="docutils literal notranslate"><span class="pre">TEXTA</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PRE</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&lt;pre id=&quot;</span><span class="si">%(divid)s</span><span class="s1">&quot; style=&quot;display: </span><span class="si">%(hide)s</span><span class="s1">;&quot;&gt;</span>
<span class="si">%(filecontent)s</span><span class="s1"></span>
<span class="s1">&lt;/pre&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">TEXTA</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&lt;textarea id=&quot;</span><span class="si">%(divid)s</span><span class="s1">&quot; rows=&quot;</span><span class="si">%(rows)d</span><span class="s1">&quot; cols=&quot;</span><span class="si">%(cols)d</span><span class="s1">&quot;&gt;</span>
<span class="si">%(filecontent)s</span><span class="s1"></span>
<span class="s1">&lt;/textarea&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="c1"># self for these functions is an instance of the writer class.  For example</span>
<span class="c1"># in html, self is sphinx.writers.html.SmartyPantsHTMLTranslator</span>
<span class="c1"># The node that is passed as a parameter is an instance of our node class.</span>
<span class="k">def</span> <span class="nf">visit_df_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">df_content</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">TEXTA</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">PRE</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">df_content</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;u&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>  <span class="c1"># hack:  there must be a better way to include the list and avoid unicode strings</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">depart_ac_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; This is called at the start of processing an activecode node.  If activecode had recursive nodes</span>
<span class="sd">        etc and did not want to do all of the processing in visit_ac_node any finishing touches could be</span>
<span class="sd">        added here.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">visit_df_node</span></code> function is called when a DataFileNode is found in the document tree.  The visit function is called when the node is first encountered.  The <code class="docutils literal notranslate"><span class="pre">depart_df_node</span></code> function is called after all the children have been visited.</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">visit_df_node</span></code> mainly just looks at its options to see if we need to create a textarea or a pre element and then lets Python’s formatted strings take care of the rest.</p>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - Controlling Question Numbering' data-toggle="tooltip">
    <a href="directives/qnum.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="directives/qnum.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - Server Hackers' data-toggle="tooltip" >
    <a href="server_hackers.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="server_hackers.html" >Next Section - Server Hackers</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Brad Miller.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>